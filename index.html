<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine?</title>

  <style>
    :root{
      --bg1:#ffe6ef;
      --bg2:#ff9fb7;
      --card:#ffffffd8;
      --text:#181818;
      --muted:#5c5c5c;
      --accent:#ff2e6a;
      --accent2:#ff7aa2;
      --shadow: 0 22px 70px rgba(0,0,0,.16);

      /* Ink curtain */
      --inkTop:#7a0017;
      --inkMid:#cc0033;
      --inkHot:#ff2e6a;

      /* Retro overlay */
      --retroShadow:#000000;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }

    body{
      margin:0;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 650px at 22% 18%, #ffffffb3, transparent 62%),
        radial-gradient(900px 520px at 84% 68%, #ffffff85, transparent 62%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* Floating hearts */
    .hearts{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0; }
    .heart{
      position:absolute;
      width:18px; height:18px;
      transform: rotate(45deg);
      opacity:.55;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.07));
      animation: floatUp linear forwards;
      color: var(--accent);
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      background: currentColor;
      border-radius:50%;
    }
    .heart{ background: currentColor; border-radius:4px; }
    .heart::before{ left:-9px; top:0; }
    .heart::after{ left:0; top:-9px; }
    @keyframes floatUp{
      from { transform: translateY(35vh) rotate(45deg) scale(var(--s)); opacity:0; }
      12%  { opacity:.55; }
      to   { transform: translateY(-130vh) rotate(45deg) scale(var(--s)); opacity:0; }
    }

    .vignette{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      background: radial-gradient(980px 620px at 50% 40%, transparent 55%, rgba(0,0,0,.10));
    }

    /* Card */
    .card{
      width:min(660px, 92vw);
      padding:34px 24px 24px;
      border-radius:28px;
      background:var(--card);
      backdrop-filter: blur(14px);
      border:1px solid #ffffffbd;
      box-shadow: var(--shadow);
      text-align:center;
      opacity:0;
      transform: translateY(14px) scale(.98);
      animation: popIn 900ms cubic-bezier(.2,.9,.2,1) forwards;
      position:relative;
      z-index:2;
      overflow:hidden;
    }
    @keyframes popIn{ to { opacity:1; transform: translateY(0) scale(1); } }
    .card.bounce{ animation: bounce 520ms cubic-bezier(.2,.9,.2,1) 1; }
    @keyframes bounce{
      0%{ transform: translateY(0) scale(1); }
      35%{ transform: translateY(-6px) scale(1.01); }
      70%{ transform: translateY(2px) scale(.995); }
      100%{ transform: translateY(0) scale(1); }
    }

    .sparkle{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(circle at 18% 12%, rgba(255,255,255,.45) 0 2px, transparent 3px),
        radial-gradient(circle at 72% 24%, rgba(255,255,255,.35) 0 2px, transparent 3px),
        radial-gradient(circle at 40% 18%, rgba(255,255,255,.35) 0 1px, transparent 2px);
      opacity:.65;
      filter: blur(.15px);
    }

    .badge{
      width:62px; height:62px;
      margin:0 auto 14px;
      border-radius:22px;
      display:grid;
      place-items:center;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.62), transparent 55%),
        linear-gradient(135deg, #ff4c7d, #ffb1c7);
      box-shadow: 0 18px 44px rgba(255, 46, 106, .22);
      animation: floaty 2.6s ease-in-out infinite;
    }
    .badge span{
      font-size:30px;
      filter: drop-shadow(0 10px 16px rgba(0,0,0,.12));
      animation: beat 1.08s ease-in-out infinite;
    }
    @keyframes floaty{ 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-7px); } }
    @keyframes beat{ 0%,100%{ transform: scale(1); } 50%{ transform: scale(1.14); } }

    .title{
      margin:0 0 10px;
      font-size: clamp(30px, 4.8vw, 56px);
      letter-spacing:-0.03em;
      line-height:1.03;
      position:relative;
      display:inline-block;
    }
    .title::after{
      content:"";
      position:absolute;
      left:-20%;
      top:55%;
      width:140%;
      height:16px;
      background: linear-gradient(90deg, transparent, rgba(255,46,106,.22), transparent);
      filter: blur(2px);
      transform: rotate(-2deg);
      animation: sweep 2.6s ease-in-out infinite;
    }
    @keyframes sweep{
      0%{ opacity:0; transform: translateX(-20%) rotate(-2deg); }
      35%{ opacity:.95; }
      60%{ opacity:.25; }
      100%{ opacity:0; transform: translateX(20%) rotate(-2deg); }
    }

    .sub{
      margin: 8px auto 18px;
      max-width: 54ch;
      color: var(--muted);
      font-size: 15px;
      line-height:1.45;
    }

    .yesBtn{
      appearance:none;
      border:0;
      cursor:pointer;
      padding:14px 28px;
      border-radius:999px;
      font-weight:1000;
      font-size:16px;
      color:white;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 18px 40px rgba(255, 46, 106, .30);
      transition: transform .12s ease, filter .12s ease, box-shadow .18s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      position:relative;
      isolation:isolate;
    }
    .yesBtn::before{
      content:"";
      position:absolute;
      inset:-7px;
      border-radius:999px;
      background: radial-gradient(circle at 25% 35%, rgba(255,255,255,.44), transparent 50%);
      opacity:.6;
      z-index:-1;
      filter: blur(2px);
      transition: opacity .2s ease;
    }
    .yesBtn:hover{ transform: translateY(-1px); }
    .yesBtn:active{ transform: translateY(2px) scale(.99); filter: brightness(.98); }
    .yesBtn[disabled]{ cursor:default; opacity:.92; }

    .disclaimer{
      margin: 14px auto 0;
      font-size: 13px;
      color:#444;
      opacity:.78;
    }
    .success{
      margin-top:14px;
      font-weight:950;
      opacity:0;
      transform: translateY(6px);
      transition: .35s ease;
    }
    .success.show{ opacity:1; transform: translateY(0); }
    .from{
      margin-top: 16px;
      font-size: 13px;
      opacity:.84;
      font-weight:900;
      color:#2b2b2b;
    }

    /* Confetti canvas */
    #confetti{ position:fixed; inset:0; pointer-events:none; z-index:10; }

    /* SABOTAGE button (reference vibe) */
    .sabotageBtn{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:25;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      border:0;
      background: transparent;
      padding:0;
    }
    .sabotageCard{
      display:flex;
      align-items:center;
      gap:12px;
      padding:14px 16px 14px 14px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(12,14,22,.96), rgba(5,7,12,.96));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 44px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.10);
      min-width: 270px;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .saboIcon{
      width:58px; height:58px;
      border-radius:18px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 55%),
        linear-gradient(135deg, #ff4b77, #7a0017);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: inset 0 -14px 18px rgba(0,0,0,.25);
      position:relative;
      overflow:hidden;
      display:grid;
      place-items:center;
    }
    .saboIcon::after{
      content:"";
      position:absolute;
      inset:-10px;
      background: radial-gradient(circle at 40% 20%, rgba(255,255,255,.22), transparent 60%),
                  conic-gradient(from 180deg at 50% 60%, rgba(255,70,110,.0), rgba(255,70,110,.18), rgba(255,70,110,.0));
      opacity:.9;
      transform: rotate(12deg);
    }
    .saboIcon .dot{
      width:14px;height:14px;border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #fff8, transparent 60%),
                  radial-gradient(circle at 50% 50%, #ffd1dc, #ff2e6a 70%);
      box-shadow: 0 10px 18px rgba(0,0,0,.22);
      position:relative;
      z-index:1;
    }
    .saboText{ text-align:left; line-height:1.05; flex:1; }
    .saboText .word{
      display:inline-block;
      font-weight:1000;
      letter-spacing:.10em;
      font-size: 18px;
      text-transform:uppercase;
      color:#ff2e6a;
      text-shadow:
        2px 2px 0 #000,
        -2px 2px 0 #000,
        2px -2px 0 #000,
        -2px -2px 0 #000,
        0 0 14px rgba(255,46,106,.22);
      position:relative;
    }
    .saboText .word::after{
      content:"";
      position:absolute;
      left:0; right:0;
      bottom:-10px;
      height:16px;
      background:
        radial-gradient(circle at 8% 40%, rgba(255,46,106,.95) 0 6px, transparent 7px),
        radial-gradient(circle at 24% 70%, rgba(255,46,106,.90) 0 8px, transparent 9px),
        radial-gradient(circle at 48% 45%, rgba(140,0,28,.95) 0 7px, transparent 8px),
        radial-gradient(circle at 70% 68%, rgba(255,46,106,.90) 0 9px, transparent 10px),
        radial-gradient(circle at 92% 48%, rgba(140,0,28,.95) 0 7px, transparent 8px);
      opacity:.9;
      filter: blur(.15px);
      animation: dripWiggle 1.6s ease-in-out infinite;
    }
    @keyframes dripWiggle{
      0%,100%{ transform: translateY(0); opacity:.85; }
      50%{ transform: translateY(2px); opacity:.98; }
    }
    .saboText .subline{
      display:block;
      margin-top:6px;
      font-size: 12px;
      font-weight:850;
      letter-spacing:.06em;
      color: rgba(233,238,252,.80);
    }
    .pill{
      padding:8px 12px;
      border-radius:999px;
      font-weight:1000;
      font-size:12px;
      letter-spacing:.10em;
      color: rgba(233,238,252,.85);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      min-width:60px;
      text-align:center;
      transition: .15s ease;
    }
    .pill.on{
      background: rgba(255,46,106,.18);
      border-color: rgba(255,46,106,.45);
      color: #ffd4de;
      box-shadow: 0 0 0 7px rgba(255,46,106,.08);
    }
    .sabotageCard:hover{
      box-shadow:
        0 18px 44px rgba(0,0,0,.30),
        0 0 0 7px rgba(255,46,106,.10),
        inset 0 1px 0 rgba(255,255,255,.10);
      transform: translateY(-1px);
    }

    /* Ink curtain */
    .inkCurtain{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:999;
      opacity:0;
      transition: opacity .12s ease;
    }
    .inkCurtain.active{ opacity:1; }
    .curtain{
      position:absolute;
      left:0;
      top:-130%;
      width:100%;
      height:130%;
      background: linear-gradient(180deg, var(--inkTop), var(--inkMid) 45%, var(--inkHot) 100%);
      filter: drop-shadow(0 20px 40px rgba(0,0,0,.22));
    }
    .curtain::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-80px;
      width:100%;
      height:180px;
      background: linear-gradient(180deg, var(--inkMid), var(--inkHot));
      -webkit-mask:
        radial-gradient(circle at 6% 40%, #000 0 66px, transparent 67px),
        radial-gradient(circle at 18% 75%, #000 0 86px, transparent 87px),
        radial-gradient(circle at 32% 45%, #000 0 74px, transparent 75px),
        radial-gradient(circle at 46% 80%, #000 0 98px, transparent 99px),
        radial-gradient(circle at 62% 52%, #000 0 78px, transparent 79px),
        radial-gradient(circle at 74% 82%, #000 0 102px, transparent 103px),
        radial-gradient(circle at 86% 56%, #000 0 80px, transparent 81px),
        radial-gradient(circle at 96% 78%, #000 0 92px, transparent 93px);
      mask:
        radial-gradient(circle at 6% 40%, #000 0 66px, transparent 67px),
        radial-gradient(circle at 18% 75%, #000 0 86px, transparent 87px),
        radial-gradient(circle at 32% 45%, #000 0 74px, transparent 75px),
        radial-gradient(circle at 46% 80%, #000 0 98px, transparent 99px),
        radial-gradient(circle at 62% 52%, #000 0 78px, transparent 79px),
        radial-gradient(circle at 74% 82%, #000 0 102px, transparent 103px),
        radial-gradient(circle at 86% 56%, #000 0 80px, transparent 81px),
        radial-gradient(circle at 96% 78%, #000 0 92px, transparent 93px);
      opacity:.97;
      filter: blur(.2px);
    }
    .inkCurtain.active .curtain{
      animation: curtainDrop 1.05s cubic-bezier(.18,.95,.2,1) forwards;
    }
    @keyframes curtainDrop{
      0%   { top:-130%; }
      70%  { top:0%; }
      100% { top:0%; }
    }

    /* ========= KO SCREEN ========= */
    .ko{
      position:fixed;
      inset:0;
      z-index:1000;
      display:grid;
      place-items:center;
      pointer-events:none;
      opacity:0;
      transition: opacity .12s ease;
    }
    .ko.show{ opacity:1; }

    /* screen shake (applied to KO container) */
    .ko.shake{
      animation: screenShake 520ms cubic-bezier(.2,.95,.2,1) 1;
    }
    @keyframes screenShake{
      0%{ transform: translate(0,0); }
      12%{ transform: translate(-10px, 6px) rotate(-.3deg); }
      24%{ transform: translate(9px, -7px) rotate(.25deg); }
      36%{ transform: translate(-7px, -5px) rotate(-.2deg); }
      48%{ transform: translate(8px, 6px) rotate(.18deg); }
      60%{ transform: translate(-5px, 4px) rotate(-.12deg); }
      100%{ transform: translate(0,0); }
    }

    .ko .bg{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 650px at 50% 40%, rgba(255,255,255,.12), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.35));
      opacity:.85;
    }

    .ko .scanlines{
      position:absolute;
      inset:0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,.24) 0px,
        rgba(0,0,0,.24) 2px,
        rgba(0,0,0,0) 7px
      );
      opacity:.20;
      mix-blend-mode:multiply;
    }

    /* impact flash */
    .impactFlash{
      position:absolute;
      inset:0;
      background: radial-gradient(900px 550px at 50% 45%, rgba(255,255,255,.55), rgba(255,255,255,0) 62%);
      opacity:0;
      transform: scale(.98);
    }
    .ko.flash .impactFlash{
      animation: flashPop 520ms ease-out 1;
    }
    @keyframes flashPop{
      0%{ opacity:0; transform: scale(.98); }
      18%{ opacity:1; transform: scale(1.02); }
      65%{ opacity:.18; transform: scale(1.06); }
      100%{ opacity:0; transform: scale(1.08); }
    }

    /* KO stamp */
    .koStack{
      position:relative;
      z-index:2;
      text-align:center;
    }

    .koText{
      font-weight:1000;
      font-size: clamp(44px, 7vw, 110px);
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#fff;
      text-shadow:
        7px 7px 0 var(--retroShadow),
        -7px 7px 0 var(--retroShadow),
        7px -7px 0 var(--retroShadow),
        -7px -7px 0 var(--retroShadow),
        0 0 26px rgba(255,77,122,.35);
      padding: 14px 18px;
      border-radius: 22px;
      background: rgba(0,0,0,.12);
      backdrop-filter: blur(6px);
      transform: scale(.85) rotate(-1deg);
      opacity:0;
    }

    .ko.show .koText{
      animation: koImpact 900ms cubic-bezier(.12,1.02,.22,1) forwards;
    }
    @keyframes koImpact{
      0%{ transform: scale(.65) rotate(-6deg); opacity:0; filter: blur(2px); }
      45%{ transform: scale(1.10) rotate(2deg); opacity:1; filter: blur(0px); }
      70%{ transform: scale(.98) rotate(-.6deg); }
      100%{ transform: scale(1) rotate(0deg); opacity:1; }
    }

    /* little KO bubble */
    .koBadge{
      display:inline-block;
      margin-top: 14px;
      padding:10px 16px;
      border-radius:999px;
      font-weight:1000;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#fff;
      background: linear-gradient(135deg, #ff2e6a, #ff8aaa);
      border: 3px solid #000;
      box-shadow: 0 16px 40px rgba(0,0,0,.25);
      transform: translateY(10px) scale(.9);
      opacity:0;
    }
    .ko.show .koBadge{
      animation: badgePop 700ms cubic-bezier(.12,1.02,.22,1) 1 forwards;
      animation-delay: 120ms;
    }
    @keyframes badgePop{
      0%{ transform: translateY(14px) scale(.75); opacity:0; }
      55%{ transform: translateY(-2px) scale(1.05); opacity:1; }
      100%{ transform: translateY(0) scale(1); opacity:1; }
    }

    .koSub{
      margin-top:10px;
      font-weight:900;
      letter-spacing:.06em;
      color: rgba(255,255,255,.90);
      text-shadow: 0 10px 24px rgba(0,0,0,.25);
      font-size: 14px;
      opacity:0;
      transform: translateY(8px);
    }
    .ko.show .koSub{
      transition: .35s ease;
      transition-delay: 220ms;
      opacity:1;
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <div class="hearts" id="hearts"></div>
  <div class="vignette"></div>
  <canvas id="confetti"></canvas>

  <div class="inkCurtain" id="inkCurtain" aria-hidden="true">
    <div class="curtain"></div>
  </div>

  <div class="ko" id="ko" aria-hidden="true">
    <div class="bg"></div>
    <div class="impactFlash"></div>
    <div class="scanlines"></div>
    <div class="koStack">
      <div class="koText" id="koText">U REJECTED</div>
      <div class="koBadge">KO!</div>
      <div class="koSub">SABOTAGE ACTIVATED ðŸ˜Œ</div>
    </div>
  </div>

  <main class="card" id="card" role="main" aria-live="polite">
    <div class="sparkle"></div>

    <div class="badge"><span>ðŸ’˜</span></div>

    <h1 class="title">Will you be my Valentine?</h1>
    <p class="sub">
      Iâ€™m officially asking you. Likeâ€¦ properly. ðŸ’—<br/>
      Choose wisely (thereâ€™s only one correct answer ðŸ˜Œ)
    </p>

    <button class="yesBtn" id="yesBtn">Yes ðŸ’–</button>

    <p class="disclaimer">Disclaimer: There is only one option ðŸ˜Œ</p>
    <div class="success" id="successMsg">Yay! ðŸ’ž You just made my day!</div>

    <div class="from">From: BA (Band Eke Hora Shot Eka)</div>
  </main>

  <button class="sabotageBtn" id="sabotageBtn" title="Sabotage (ink curtain)">
    <div class="sabotageCard">
      <div class="saboIcon"><div class="dot"></div></div>
      <div class="saboText">
        <span class="word">SABOTAGE</span>
        <span class="subline">Ink curtain finish</span>
      </div>
      <div class="pill" id="pill">OFF</div>
    </div>
  </button>

  <script>
    // Hearts
    const hearts = document.getElementById('hearts');
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      const left = Math.random() * 100;
      const dur  = 7 + Math.random() * 8;
      const size = 0.6 + Math.random() * 1.6;
      const hueShift = (Math.random() * 10) - 5;
      h.style.left = left + 'vw';
      h.style.bottom = (-10 - Math.random()*18) + 'vh';
      h.style.animationDuration = dur + 's';
      h.style.setProperty('--s', size.toFixed(2));
      h.style.color = `hsl(${350 + hueShift}, 95%, ${56 + Math.random()*8}%)`;
      hearts.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000);
    }
    setInterval(spawnHeart, 320);
    for(let i=0;i<12;i++) setTimeout(spawnHeart, i*140);

    // Confetti
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resize);
    resize();

    let confetti = [];
    let running = false;

    function burstConfetti(){
      running = true;
      confetti = [];
      const n = 340;
      const cx = window.innerWidth/2;
      const cy = window.innerHeight/2;

      for(let i=0;i<n;i++){
        confetti.push({
          x: cx + (Math.random()*100 - 50),
          y: cy + (Math.random()*34 - 17),
          vx: (Math.random()*9 - 4.5),
          vy: (Math.random()*-12 - 2),
          g: 0.22 + Math.random()*0.10,
          w: 3 + Math.random()*5,
          h: 2 + Math.random()*4,
          a: 1,
          spin: (Math.random()*0.30 - 0.15),
          ang: Math.random()*Math.PI*2,
          col: `hsl(${Math.floor(330 + Math.random()*45)}, 95%, ${55 + Math.random()*12}%)`
        });
      }
      requestAnimationFrame(tick);
      setTimeout(()=>{ running = false; }, 1900);
    }

    function tick(){
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      let alive = 0;

      for(const p of confetti){
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.ang += p.spin;
        p.a *= 0.985;

        if(p.y < window.innerHeight + 50 && p.a > 0.05){
          alive++;
          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.ang);
          ctx.fillStyle = p.col;
          ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          ctx.restore();
        }
      }

      if(running || alive > 0) requestAnimationFrame(tick);
      else ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    }

    // YES button
    const yesBtn = document.getElementById('yesBtn');
    const successMsg = document.getElementById('successMsg');
    const card = document.getElementById('card');

    yesBtn.addEventListener('click', ()=>{
      burstConfetti();
      successMsg.classList.add('show');
      yesBtn.disabled = true;
      yesBtn.textContent = "YES âœ…";
      card.classList.remove('bounce');
      void card.offsetWidth;
      card.classList.add('bounce');
    });

    // SABOTAGE = curtain + KO impact
    const sabotageBtn = document.getElementById('sabotageBtn');
    const inkCurtain  = document.getElementById('inkCurtain');
    const ko          = document.getElementById('ko');
    const pill        = document.getElementById('pill');

    let inkOn = false;

    sabotageBtn.addEventListener('click', ()=>{
      inkOn = !inkOn;

      if(inkOn){
        pill.textContent = "ON";
        pill.classList.add('on');

        inkCurtain.classList.add('active');

        // After curtain drops: show KO + shake + flash
        ko.classList.remove('show','shake','flash');
        setTimeout(()=>{
          ko.classList.add('show','shake','flash');
          // remove shake class so it can re-trigger later
          setTimeout(()=> ko.classList.remove('shake','flash'), 700);
        }, 980);

      } else {
        pill.textContent = "OFF";
        pill.classList.remove('on');

        ko.classList.remove('show','shake','flash');
        inkCurtain.classList.remove('active');
      }
    });
  </script>
</body>
</html>
